<!DOCTYPE html>
<html lang="en">
<head>
    {% block head %}
    <meta charset="UTF-8">
    <title>{% block title %}{% endblock %} - NewHome</title>
    <link rel="stylesheet" href="index.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var searchForm = document.getElementById("searchForm");
            searchForm.addEventListener("submit", function(event) {
                event.preventDefault();
                
                if (window.innerWidth < 576) { // On small screens
                    searchForm.action = "advancedsearch";
                } else {
                    searchForm.action = "search";
                }
                
                // Submit the form
                searchForm.submit();
            });
        });
    </script>
    {% endblock %}
</head> 
<body>
    <!-- Header derived from w3schools -->
    <div class="topnav" id="topnav">
        <a class="d-none d-md-block {% if active_link == '/' %}active{% endif %} home" href="{{ url_for('index') }}"><img src="NewHomeLogo.png" style="height:50px;" alt="New Home Logo"></a>
        <a class="d-none d-lg-block {% if active_link == '/about' %}active{% endif %}" href="about">About</a>
        <a class="d-none d-lg-block {% if active_link == '/contact' %}active{% endif %}" href="contact">Contact</a>
        {% if current_user.is_anonymous %}
        <a class="d-none d-md-block {% if active_link == '/login' %}active{% endif %}" href="{{ url_for('login') }}">Login</a>
        {% else %}
        <a class="d-none d-md-block {% if active_link == '/login' %}active{% endif %}" href="{{ url_for('logout') }}">Logout</a>
        <a class="d-none d-md-block {% if active_link == '/upload' %}active{% endif %}" href="{{ url_for('upload') }}">Post</a>
        <a class="d-none d-md-block {% if active_link == '/user' %}active{% endif %}" href="{{ url_for('user', username=current_user.username) }}">Profile</a>
        {% endif %}
        <a class="d-none d-lg-block {% if active_link == '/advancedsearch' %}active{% endif %}" href="{{ url_for('advancedSearch') }}">Search</a>
        <div class="search-container">
            <form action="search" accept-charset="UTF-8" method="get">
                <input type="text" placeholder="Search.." name="q" maxlength="1024" >
                <button type="submit"><i class="bi bi-search"></i></button>
            </form>
        </div>
    </div>
    <div style="margin-top:60px">
      <!--Flashes error/informational messages for user-->
      {% with messages = get_flashed_messages() %}
      {% if messages %}
      <ul>
          {% for message in messages %}
          <li>{{ message }}</li>
          {% endfor %}
      </ul>
      {% endif %}
      {% endwith %}
    </div>
    <div class="content" id="content">{% block content %}{% endblock %}</div>

    <!-- The following was derived from https://getbootstrap.com/docs/5.2/examples/footers/ -->
    <div class="container footer">
        <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
          <p class="col-md-4 mb-0 text-muted">&copy; 2024 NewHome, Inc</p>
  
          <a class="col-md-4 d-flex align-items-center justify-content-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none">
            <svg class="bi me-2" width="40" height="32"><use xlink:href="#bootstrap"/></svg>
          </a>
  
          <ul class="nav col-md-4 justify-content-end">
            <li class="nav-item"><a href="/" class="nav-link px-2 text-muted">Home</a></li>
            <li class="nav-item"><a href="/about" class="nav-link px-2 text-muted">About Us</a></li>
            <li class="nav-item"><a href="/contact" class="nav-link px-2 text-muted">Contact Us</a></li>
            <li class="nav-item"><a href="/login" class="nav-link px-2 text-muted">Log In</a></li>
            <li class="nav-item"><a href="/upload" class="nav-link px-2 text-muted">Post</a></li>
          </ul>
        </footer>
    </div>
</body>
</html>